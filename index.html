<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Follow the White Rabbit</title>
  <link rel="stylesheet" href="base.css">
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div class="canvas">
    <div class="content">
      <div class="triangle-left"></div>
      <div class="triangle-right"></div>

      <a href="grid/index.html" class="green-ellipse"><a>

      <div class="line line-black line-1"></div>
      <div class="line line-black line-2"></div>
      <div class="line line-black line-3"></div>
      <div class="line line-black line-4"></div>
      <div class="line line-black line-5"></div>
      <div class="line line-black line-6"></div>
      <div class="line line-black line-7"></div>
      <div class="line line-black line-8"></div>
      <div class="line line-black line-9"></div>
      <div class="line line-black line-10"></div>

      <div class="vertical-group">
        <a href="walden/index.html" class="vline v1"></a>
        <a href="sisyphus/index.html" class="vline v2"></a>
        <a href="sea-of-books/index.html" class="vline v3"></a>
        <a href="catcher/index.html" class="vline v4"></a>
        <a href="stranger/index.html" class="vline v5"></a>
      </div>

      <div class="line line-red-1"></div>
      <div class="line line-red-2"></div>
      <div class="line line-red-main"></div>

      <div class="text-follow">
        <span class="f1">F</span><span class="f2">o</span><span class="f3">l</span><span class="f4">l</span><span class="f5">o</span><span class="f6">w</span><span class="space"></span><span class="f7">t</span><span class="f8">h</span><span class="f9">e</span>
      </div>

      <div class="text-white">
        <span class="w1">W</span><span class="w2">h</span><span class="w3">i</span><span class="w4">t</span><span class="w5">e</span><span class="space"></span><span class="w6">r</span><span class="w7">a</span><span class="w8">b</span><span class="w9">b</span><span class="w10">i</span><span class="w11">t</span>
      </div>

      <a href="cursor/index.html" class="red-capsule"></a>
    </div>
  </div>

  <script>
    var content = document.querySelector('.content');
    var canvas = document.querySelector('.canvas');

    /* === Forward: index → Sea of books === */
    document.querySelector('.v3').addEventListener('click', function (e) {
      e.preventDefault();

      content.classList.add('phase-fadeout');

      setTimeout(function () {
        content.classList.add('phase-transform');
        canvas.classList.add('phase-transform', 'canvas-fade');

        setTimeout(function () {
          window.location.href = 'sea-of-books/index.html';
        }, 800);
      }, 600);
    });

    /* === Reverse: Sea of books → index === */
    (function () {
      var params = new URLSearchParams(window.location.search);
      if (params.get('from') !== 'sea') return;

      history.replaceState(null, '', window.location.pathname);

      canvas.classList.add('no-transition', 'phase-transform');
      canvas.style.background = '#ffffff';
      content.classList.add('phase-fadeout');

      void canvas.offsetHeight;

      canvas.classList.remove('no-transition');
      canvas.style.transition = 'background 2.0s cubic-bezier(0.4, 0, 0.2, 1)';
      canvas.style.background = '';
      canvas.classList.remove('phase-transform');

      setTimeout(function () {
        canvas.style.transition = '';
        content.classList.add('phase-fadein');
        content.classList.remove('phase-fadeout');

        setTimeout(function () {
          content.classList.remove('phase-fadein');
        }, 600);
      }, 800);
    })();
  </script>
</body>
</html>
